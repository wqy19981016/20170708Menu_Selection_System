#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <conio.h>
#include <time.h>
#include <windows.h>

#define N 78
#define ESC 27
#define ENTER 13
#define n 110

char Id[10];				//服务员id 
char Name[20];				//经理或管理员姓名 
int userIdentity;			//用户身份 
 
struct boss					//经理结构体
{
	char userName[10];		//用户名 
	char keyWord[16];		//密码 
	char name[10];			//姓名 
}; 

struct staff				//服务员结构体
{
	char userName[10];		//用户名 
	char keyWord[16];		//密码 
	char id[5];				//服务员id 
	char age[3];			//年龄
	char sex[5];			//性别
	char name[10];			//服务员姓名 
	char isWork[10];		//服务员在职状态(离职 / 在职)
	char tel[10];			//服务员联系方式
	int profit;				//营业额
};

struct admin				//系统管理员结构体
{
	char userName[10];		//用户名 
	char keyWord[16];		//密码 
	char name[10];			//姓名 
};

 struct table				//台桌结构体
{
	char id[10];			//台桌号 
	char condition[10];		//使用情况（1占用2空闲3维护4预定） 
	char location[20];		//描述（位置） 
};

struct list					//菜谱结构体
{
	char id[10];			//编号 
	char name[20];			//菜名 
	char price[5];			//价格 
	char count[3];			//份数
};

struct record				//销售记录结构体
{
	char id[20];			//流水号 
 	struct staff staffInfo;	//服务员 	 
	struct list listInfo;	//点的菜 
	struct table tableInfo;	//台桌 
	char time[14];			//销售时间
	char isAfford[5];		//是否付款（0没付款1已付款） 
};

struct boss_node
{
	struct boss data;
	struct boss_node *next;
}*Boss_Head=NULL;

struct staff_node
{
	struct staff data;
	struct staff_node *next;
}*Staff_Head=NULL;

struct admin_node
{
	struct admin data;
	struct admin_node *next;
}*Admin_Head=NULL;

struct table_node
{
	struct table data;
	struct table_node *next;
}*Table_Head=NULL;

struct list_node
{
	struct list data;
	struct list_node *next;
}*List_Head=NULL;

struct record_node
{
	struct record data;
	struct record_node *next;
}*Record_Head=NULL;
//其他函数
void Waiting(int);
int Logging();
int IsUsernameRepeat(char *s);
void Load();
void Save();
//职工函数
struct staff_node *Load_Staff();
void Save_Staff(struct staff_node *);
void Staff_Module();
void Staff_Management();
struct staff_node *Staff_Management_Input();
void Staff_Management_Display();
struct staff_node *Staff_Management_Modify();
struct staff_node *Staff_Management_Delete();
void Staff_Management_Search();
//管理员函数
struct admin_node *Load_Admin();
void Save_Admin(struct admin_node *);
void Admin_Module();
//经理函数
struct boss_node *Load_Boss();
void Save_Boss(struct boss_node *);
void Boss_Module();
void Profit_Count(); 
//台桌函数
struct table_node *Load_Table();
void Save_Table(struct table_node *);
void Table_Management();
struct table_node *Table_Management_Input();
void Table_Management_Display();
struct table_node *Table_Management_Modify();
struct table_node *Table_Management_Delete();
void Table_Management_Search();
//销售记录函数
struct record_node *Load_Record();
void Save_Record(struct record_node *);
struct table_node *Record_Management_Open();
struct record_node *Record_Management_Order();
void Record_Management_Profit_Search();
void Record_Management_isAfford_Search();
struct record_node *Record_Management_Afford();
//菜谱函数
struct list_node *Load_List();
void Save_List(struct list_node *);
void List_Mangement();
struct list_node *List_Management_Input();
void List_Management_Display();
struct list_node *List_Management_Modify();
struct list_node *List_Management_Delete();
void List_Management_Search();

int main()
{
	system("mode con cols=110 lines=30");
	system("color 3f");
	Load();
	userIdentity=Logging();		//1为经理，2为系统管理员，3为服务员
	Waiting(userIdentity); 
	switch(userIdentity)
	{
		case 1:Boss_Module();break;
		case 2:Admin_Module();break;
		case 3:Staff_Module();break;
	}
}

void Load()
{
	Boss_Head=Load_Boss();
	Staff_Head=Load_Staff();
	Admin_Head=Load_Admin();
	Table_Head=Load_Table();
	List_Head=Load_List();
	Record_Head=Load_Record();
}

struct boss_node *Load_Boss()
{
	struct boss_node *h,*p,*tail;
	int isExistBoss=0;
    FILE *fp;
    h=NULL;
    if((fp=fopen("D:\\点菜系统\\boss.txt","r+"))==NULL)
    {
        printf("\n\n\n\n\n\n\n\n\t|*********************** 文件打开失败! *************************|\n");
        exit(1);
    }
    else
    {
        rewind(fp);
        do
        {
            p=(struct boss_node *)malloc(sizeof(struct boss_node));
            if(fread(p,sizeof(struct boss_node),1,fp)!=1)
				break;
			isExistBoss=1; 
            if(h==NULL)
				h=p;
            else
				tail->next=p;
            tail=p;
        }while(1);
        if(isExistBoss==0)
		{
			printf("当前系统暂无经理，请注册您的经理身份：\n");
			printf("用户名：");
			scanf("%s",p->data.userName);
			while(IsUsernameRepeat(p->data.userName))
			{
				printf("用户名：");
				scanf("%s",p->data.userName);
			}
			printf("密码：");
			scanf("%s",p->data.keyWord);
			printf("姓名：");
			scanf("%s",p->data.name);
			isExistBoss=1;
			p->next=NULL;
			if(h==NULL)
				h=p;
            else
				tail->next=p;
            tail=p;		 
		} 
	}
	fclose(fp); 
    return h;	
}
struct staff_node *Load_Staff()
{
	struct staff_node *h,*p,*tail;
    FILE *fp;
    h=NULL;
    if((fp=fopen("D:\\点菜系统\\staff.txt","r+"))==NULL)
    {
        printf("\n\n\n\n\n\n\n\n\t|*********************** 文件打开失败! *************************|\n");
        exit(1);
    }
    else
    {
        rewind(fp);
        do
        {
            p=(struct staff_node *)malloc(sizeof(struct staff_node));
            if(fread(p,sizeof(struct staff_node),1,fp)!=1)break;
            if(h==NULL)
				h=p;
            else
				tail->next=p;
            tail=p;
        }while(1);
	}
	fclose(fp); 
    return h;
}
struct admin_node *Load_Admin()
{
	struct admin_node *h,*p,*tail;
	int isExistAdmin=0;
    FILE *fp;
    h=NULL;
    if((fp=fopen("D:\\点菜系统\\admin.txt","r+"))==NULL)
    {
        printf("\n\n\n\n\n\n\n\n\t|*********************** 文件打开失败! *************************|\n");
        exit(1);
    }
    else
    {
        rewind(fp);
        do
        {
            p=(struct admin_node *)malloc(sizeof(struct admin_node));
            if(fread(p,sizeof(struct admin_node),1,fp)!=1)
				break;				 
			isExistAdmin=1;
            if(h==NULL)
				h=p;
            else
				tail->next=p;
            tail=p;
        }while(1);
        if(isExistAdmin==0)
		{
			printf("当前系统暂无管理员，请注册您的管理员身份：\n");
			printf("用户名：");
			scanf("%s",p->data.userName);
			while(IsUsernameRepeat(p->data.userName))
			{
				printf("用户名：");
				scanf("%s",p->data.userName);
			}
			printf("密码：");
			scanf("%s",p->data.keyWord);
			printf("姓名：");
			scanf("%s",p->data.name);
			p->next=NULL;
			if(h==NULL)
				h=p;
            else
				tail->next=p;
            tail=p;							 
		}			
	}
	fclose(fp); 
    return h;
}
struct table_node *Load_Table()
{
	struct table_node *h,*p,*tail;
    FILE *fp;
    h=NULL;
    if((fp=fopen("D:\\点菜系统\\table.txt","r+"))==NULL)
    {
        printf("\n\n\n\n\n\n\n\n\t|*********************** 文件打开失败! *************************|\n");
        exit(1);
    }
    else
    {
        rewind(fp);
        do
        {
            p=(struct table_node *)malloc(sizeof(struct table_node));
            if(fread(p,sizeof(struct table_node),1,fp)!=1)break;
            if(h==NULL)
				h=p;
            else
				tail->next=p;
            tail=p;
        }while(1);
	}
	fclose(fp); 
    return h;
}
struct record_node *Load_Record()
{
	struct record_node *h,*p,*tail;
    FILE *fp;
    h=NULL;
    if((fp=fopen("D:\\点菜系统\\record.txt","r+"))==NULL)
    {
        printf("\n\n\n\n\n\n\n\n\t|*********************** 文件打开失败! *************************|\n");
        exit(1);
    }
    else
    {
        rewind(fp);
        do
        {
            p=(struct record_node *)malloc(sizeof(struct record_node));
            if(fread(p,sizeof(struct record_node),1,fp)!=1)break;
            if(h==NULL)
				h=p;
            else
				tail->next=p;
            tail=p;
        }while(1);
	}
	fclose(fp); 
    return h;
}
struct list_node *Load_List()
{
	struct list_node *h,*p,*tail;
    FILE *fp;
    h=NULL;
    if((fp=fopen("D:\\点菜系统\\list.txt","r+"))==NULL)
    {
        printf("\n\n\n\n\n\n\n\n\t|*********************** 文件打开失败! *************************|\n");
        exit(1);
    }
    else
    {
        rewind(fp);
        do
        {
            p=(struct list_node *)malloc(sizeof(struct list_node));
            if(fread(p,sizeof(struct list_node),1,fp)!=1)break;
            if(h==NULL)
				h=p;
            else
				tail->next=p;
            tail=p;
        }while(1);
	}
	fclose(fp); 
    return h;
}

void Save()
{
	char sel[5];
	do
	{
		system("cls");
		printf("\n\n\n\n\n\n\n\n\t\t\t\t是否保存？(yes / no)：");
		scanf("%s",sel); 
	}while(stricmp(sel,"yes")&&stricmp(sel,"no"));
	if(stricmp(sel,"yes")==0)
	{
		Save_Admin(Admin_Head);
		Save_Staff(Staff_Head);
		Save_Boss(Boss_Head);
		Save_Table(Table_Head);
		Save_Record(Record_Head);
		Save_List(List_Head);
		printf("\t\t\t\t保存完毕\n");
		getch();
	}	
}

void Save_Admin(struct admin_node *Admin_Head)
{
	FILE *fp;
	struct admin_node *p;
	if((fp=fopen("D:\\点菜系统\\admin.txt","w+"))==NULL)
	{
		printf("can not open file\n");
		exit(1);
	}
	p=Admin_Head;
	while(p!=NULL)
	{
		fwrite(p,sizeof(struct admin_node),1,fp);
		p=p->next;
	}
	fclose(fp);
}
void Save_Staff(struct staff_node *Staff_Head)
{
	FILE *fp;
	struct staff_node *p;
	if((fp=fopen("D:\\点菜系统\\staff.txt","w+"))==NULL)
	{
		printf("can not open file\n");
		exit(1);
	}
	p=Staff_Head;
	while(p!=NULL)
	{
		fwrite(p,sizeof(struct staff_node),1,fp);
		p=p->next;
	}
	fclose(fp);
}
void Save_Boss(struct boss_node *Boss_Head)
{
	FILE *fp;
	struct boss_node *p;
	if((fp=fopen("D:\\点菜系统\\boss.txt","w+"))==NULL)
	{
		printf("can not open file\n");
		exit(1);
	}
	p=Boss_Head;
	while(p!=NULL)
	{
		fwrite(p,sizeof(struct boss_node),1,fp);
		p=p->next;
	}
	fclose(fp);
}
void Save_Table(struct table_node *Table_Head)
{
	FILE *fp;
	struct table_node *p;
	if((fp=fopen("D:\\点菜系统\\table.txt","w+"))==NULL)
	{
		printf("can not open file\n");
		exit(1);
	}
	p=Table_Head;
	while(p!=NULL)
	{
		fwrite(p,sizeof(struct table_node),1,fp);
		p=p->next;
	}
	fclose(fp);
}
void Save_Record(struct record_node *Record_Head)
{
	FILE *fp;
	struct record_node *p;
	if((fp=fopen("D:\\点菜系统\\record.txt","w+"))==NULL)
	{
		printf("can not open file\n");
		exit(1);
	}
	p=Record_Head;
	while(p!=NULL)
	{
		fwrite(p,sizeof(struct record_node),1,fp);
		p=p->next;
	}
	fclose(fp);
}
void Save_List(struct list_node *List_Head)
{
	FILE *fp;
	struct list_node *p;
	if((fp=fopen("D:\\点菜系统\\list.txt","w+"))==NULL)
	{
		printf("can not open file\n");
		exit(1);
	}
	p=List_Head;
	while(p!=NULL)
	{
		fwrite(p,sizeof(struct list_node),1,fp);
		p=p->next;
	}
	fclose(fp);
}

int Logging()
{
	struct boss_node *B;
	struct staff_node *S;
	struct admin_node *A;
	int Find=0;
	char userName[10],keyWord[16];
	do
	{
		system("cls"); 
		printf("\n\t\t\t-------------------------------------------------------\n");
		printf("\t\t\t                      登 陆 界 面                      \n");
		printf("\t\t\t-------------------------------------------------------\n");  
		printf("\n\n\n\t\t\t\t\t用户名：");
		scanf("%s",userName); 
		printf("\n\n\n\t\t\t\t\t  密码：");
		scanf("%s",keyWord);
		if(Find==0)
		{
			B=Boss_Head;
			while(B)
			{
				if(strcmp(B->data.userName,userName)==0&&strcmp(B->data.keyWord,keyWord)==0)
				{
					Find=1;
					strcpy(Name,B->data.name);
					return 1;
				}
				B=B->next;
			}
		} 
		if(Find==0)
		{
			A=Admin_Head;
			while(A)
			{
				if(strcmp(A->data.userName,userName)==0&&strcmp(A->data.keyWord,keyWord)==0)
				{
					Find=1;
					strcpy(Name,A->data.name);
					return 2;
				}
				A=A->next;
			}
		}
		if(Find==0)
		{
			S=Staff_Head;
			while(S)
			{
				if(strcmp(S->data.userName,userName)==0&&strcmp(S->data.keyWord,keyWord)==0)
				{
					Find=1;
					strcpy(Id,S->data.id);
					return 3;
				}
				S=S->next;
			}
		}
		if(Find==0)
		{		
			printf("\t\t\t\t用户名和密码错误!");
			getch();
		} 
		else
			break;
	}while(1);	
}
void Boss_Module()
{
	int i,select;
	char sel[5]; 
	char *Menu[]={"1.营业额查询","2.注销","0.退出"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t\t\t-----------------------------------------------------------\n");
			printf("\t\t\t                      经 理 界 面                      \n");
			printf("\t\t\t-----------------------------------------------------------\n"); 
			for(i=0;i<3;i++)
				printf("\n\t\t\t\t%-20s\n",Menu[i]);
			printf("\t\t\t请输入您的选择(0-2)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>2);
		switch(select)
		{
			case 1:Profit_Count();break;
			case 2:Save();main();break;
			case 0:Save();exit(1);break;
		}		
	}while(1);
	
}
void Admin_Module()
{
	int i,select;
	char sel[5]; 
	char *Menu[]={"1.人员管理","2.台桌管理","3.菜谱管理","4.注销","0.退出"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t\t\t-------------------------------------------------------\n");
			printf("\t\t\t                   管 理 员 界 面                   \n");
			printf("\t\t\t-------------------------------------------------------\n");
			for(i=0;i<5;i++)
				printf("\n\t\t\t\t\t%-20s\n\n",Menu[i]);
			printf("\t\t\t\t\t请输入您的选择(0-4)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>4);
		switch(select)
		{
			case 1:Staff_Management();break;
			case 2:Table_Management();break;
			case 3:List_Mangement();break;
			case 4:Save();main();break;
			case 0:Save();exit(1);break;
		}
	}while(1);
}
void Staff_Module()
{
	int i,select;
	char sel[5],ch; 
	char *Menu[]={"1.开桌","2.点菜","3.营业额查询","4.已买/未买单查询","5.结账","0.注销"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t\t\t-------------------------------------------------------\n");
			printf("\t\t\t                   服 务 员 界 面                   \n");
			printf("\t\t\t-------------------------------------------------------\n"); 
			for(i=0;i<6;i++)
				printf("\n\t\t\t\t\t%-20s\n\n",Menu[i]);
			printf("\t\t\t\t\t请输入您的选择(0-5)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>5);		
		switch(select)
		{
			case 1:Table_Head=Record_Management_Open();break;
			case 2:Record_Head=Record_Management_Order();break;
			case 3:Record_Management_Profit_Search();break;
			case 4:Record_Management_isAfford_Search();break;
			case 5:Record_Head=Record_Management_Afford();break;
			case 0:Save();main();break;
		}
	}while(1);	
}

void Staff_Management()
{
	int i,select;
	char sel[5]; 
	char *Menu[]={"1.添加人员","2.显示人员","3.修改人员","4.删除人员","5.查询人员","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t\t\t-------------------------------------------------------\n");
			printf("\t\t\t                      人 员 管 理                      \n");
			printf("\t\t\t-------------------------------------------------------\n");
			for(i=0;i<6;i++)
				printf("\n\t\t\t\t\t%-20s\n\n",Menu[i]);
			printf("\t\t\t\t\t请输入您的选择(0-4)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>5);
		switch(select)
		{
		case 1:Staff_Head=Staff_Management_Input();break;
		case 2:Staff_Management_Display();break;
		case 3:Staff_Head=Staff_Management_Modify();break;
		case 4:Staff_Head=Staff_Management_Delete();break;
		case 5:Staff_Management_Search();break;
		}
		if(select==0)
			break;
	}while(1);	
}

struct staff_node *Staff_Management_Input()
{
	struct staff_node *p,*q;
	char ch,s[20];
	printf("\n\t\t\t-------------------------------------------------------\n");
	printf("\t\t\t                      添 加 人 员                      \n");
	printf("\t\t\t-------------------------------------------------------\n");
	do
	{
		fflush(stdin);
		p=Staff_Head;
		while(p)
		{
			q=p;
			p=p->next;
		}
		p=(struct staff_node *)malloc(sizeof(struct staff_node));
		printf("\t\t\t请输入新员工的姓名："); 
		scanf("%s",p->data.name);
		printf("\t\t\t请输入新员工的性别(F/M)：");
		while(strcmp(s,"F")!=0&&strcmp(s,"M")!=0)
			scanf("%s",s);
		if(strcmp(s,"F")==0)
			strcpy(p->data.sex,"女");
		else
			strcpy(p->data.sex,"男");
		printf("\t\t\t请输入新员工的年龄：");
		scanf("%s",p->data.age);
		printf("\t\t\t请输入新员工的编号：");
		scanf("%s",p->data.id);		
		printf("\t\t\t请输入新员工的工作状态(0表示离职，1表示在职)：");
		while(strcmp(s,"0")!=0&&strcmp(s,"1")!=0)
			scanf("%s",s);
		if(strcmp(s,"0")==0)
			strcpy(p->data.isWork,"离职");
		else
			strcpy(p->data.isWork,"在职");
		printf("\t\t\t请输入新员工的电话：");
		scanf("%s",p->data.tel);
		printf("\t\t\t请输入新员工的用户名：");
		scanf("%s",p->data.userName);
		while(IsUsernameRepeat(p->data.userName))
		{
			printf("\t\t\t请输入新员工的用户名：");
			scanf("%s",p->data.userName);
		}
		printf("\t\t\t请输入新员工的密码：");
		scanf("%s",p->data.keyWord);
		p->data.profit=0;
		p->next=NULL;
		if(Staff_Head==NULL)
			Staff_Head=p;
		else
			q->next=p;
		q=p; 
		printf("\n\t\t\t|***** 添加成功! 按回车键继续添加 or 按N键停止添加*****|\n");
		while(ch!=ENTER&&ch!=N&&ch!=n)
			ch=getch();					//***********************************************读取按键直到为ENTER或N
		if(ch==N||ch==n)
			break;
	}while(ch==ENTER);
	return Staff_Head;
}

void Staff_Management_Display()		//**********************************************按指定格式输出
{
	struct staff_node *p;
	p=Staff_Head;
	system("cls");
	printf("\n\t\t\t-------------------------------------------------------\n");
	printf("\t\t\t                      人 员 名 单                      \n");
	printf("\t\t\t-------------------------------------------------------\n");
	printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
	while(p)
	{
		printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
		p=p->next;
	}
	getch();
}

struct staff_node *Staff_Management_Modify()
{
	int i,j,select,profit;
	char sel[5],ch,s[10];
	struct staff_node *p;
	char *Menu1[]={"1.姓名","2.性别","3.年龄","4.编号","5.在职状态","6.电话","7.用户名","8.营业额","0.返回"};//职工忘记密码可以通过找系统管理员修改密码
	char *Menu2[]={"1.姓名","2.性别","3.年龄","4.编号","5.在职状态","6.电话","7.用户名","8.密码","9.营业额","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t\t\t-------------------------------------------------------\n");
			printf("\t\t\t                      人 员 修 改                      \n");
			printf("\t\t\t-------------------------------------------------------\n");
			for(i=0;i<9;i++)
			{
				if(i%2!=0)
					printf("\t\t\t%-20s\n\n",Menu1[i]);
				else
					printf("\n\t\t\t%-20s",Menu1[i]);
			}
			printf("\n\t\t\t\t\t请输入您的选择(0-8)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>8);
		if(select>0)
		{
			p=Staff_Head;
			j=0;
			if(select==1)
			{
				printf("\n\t\t\t\t请输入您所想要查询的服务员姓名:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.name,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==2)
			{
				printf("\n\t\t\t\t请输入您所想要查询的服务员性别(F/M):");
				while(strcmp(s,"F")!=0&&strcmp(s,"M")!=0)
					scanf("%s",s);
				if(strcmp(s,"F")==0)
					strcpy(s,"女");
				else
					strcpy(s,"男");
				while(p)
				{
					if(!strcmp(p->data.sex,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==3)
			{
				printf("\n\t\t\t\t请输入您所想要查询的服务员年龄:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.age,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==4)
			{
				printf("\n\t\t\t\t请输入您所想要查询的服务员编号:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.id,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==5)
			{
				printf("\n\t\t\t\t请输入您所想要查询的服务员在职状态(0表示离职，1表示在职):");
				while(strcmp(s,"0")!=0&&strcmp(s,"1")!=0)
					scanf("%s",s);
				if(strcmp(s,"0")==0)
					strcpy(s,"离职");
				else
					strcpy(s,"在职");
				while(p)
				{
					if(!strcmp(p->data.isWork,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==6)
			{
				printf("\n\t\t\t\t请输入您所想要查询的服务员电话:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.tel,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==7)
			{
				printf("\n\t\t\t\t请输入您所想要查询的用户名:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.userName,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==8)
			{
				printf("\n\t\t\t\t请输入您所想要查询的营业额:");
				scanf("%d",&profit);
				while(p)
				{
					if(p->data.profit==profit)
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(p==Staff_Head)
				printf("\n\n\n\n\n\n\n\n\t|***********************  暂无记录!  *************************|\n");
			if(j==0)
				switch(select)
				{
				case 1:printf("\n\t\t\t|********* 系统未发现姓名为%-10s的联系人! *********|\n",s);break;
				case 2:printf("\n\t\t\t|********* 系统未发现性别为%-10s的联系人! *********|\n",s);break;
				case 3:printf("\n\t\t\t|********* 系统未发现年龄为%-10s的联系人! *********|\n",s);break;
				case 4:printf("\n\t\t\t|********* 系统未发现编号为%-10s的联系人! *********|\n",s);break;
				case 5:printf("\n\t\t\t|******* 系统未发现在职状态为%-10s的联系人! *******|\n",s);break;
				case 6:printf("\n\t\t\t|********* 系统未发现电话为%-10s的联系人! *********|\n",s);break;
				case 7:printf("\n\t\t\t|******** 系统未发现用户名为%-10s的联系人! ********|\n",s);break;
				case 8:printf("\n\t\t\t|******** 系统未发现营业额为%-10s的联系人! ********|\n",s);break;
				}
			else
			{
				printf("\t\t\t请输入您想要修改的服务员编号：");
				scanf("%s",s);
				p=Staff_Head;
				while(p&&strcmp(p->data.id,s))
					p=p->next;
				if(p==NULL)
				{
					if(p==Staff_Head)
						printf("\t--------------- 暂 无 记 录 ！---------------");
					else
						printf("\t--------------- 查 无 此 人 ！---------------");
				}	
				else
				{
					system("cls");
					printf("待修改员工信息：\n");
					printf(" -------------------------------------------------------------------------------------------------------\n");
					printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");			
					printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					printf(" -------------------------------------------------------------------------------------------------------\n");
					do
					{ 
						printf("\n\t\t\t-------------------------------------------------------\n");
						printf("\t\t\t                      人 员 修 改                      \n");
						printf("\t\t\t-------------------------------------------------------\n");
						for(i=0;i<10;i++)
						{
							if(i%2!=0)
								printf("\t\t%-20s\n\n",Menu2[i]);
							else
								printf("\n\t\t\t%-20s",Menu2[i]);
						}
						printf("\n\t\t\t请输入您的选择(0-9)：");
						scanf("%s",sel);
						select=atoi(sel);
					}while(select<0||select>8);
					if(select==0)
						break;
					switch(select)
					{
						case 1:printf("\n\t\t\t请输入正确的姓名：");scanf("%s",p->data.name);break;
						case 2:printf("\n\t\t\t请输入正确的性别(F/M)：");while(strcmp(s,"F")!=0&&strcmp(s,"M")!=0) scanf("%s",s);if(strcmp(s,"F")==0) strcpy(p->data.sex,"女");else strcpy(p->data.sex,"男");		break;
						case 3:printf("\n\t\t\t请输入正确的年龄：");scanf("%s",p->data.age);break;
						case 4:printf("\n\t\t\t请输入正确的编号：");scanf("%s",p->data.id);break;
						case 5:printf("\n\t\t\t请输入正确的在职状况(0表示离职，1表示在职)：");while(strcmp(s,"0")!=0&&strcmp(s,"1")!=0) scanf("%s",s);if(strcmp(s,"0")==0) strcpy(p->data.isWork,"离职");else strcpy(p->data.isWork,"在职");break;
						case 6:printf("\n\t\t\t请输入正确的电话：");scanf("%s",p->data.tel);break;
						case 7:printf("\n\t\t\t请输入正确的用户名：");scanf("%s",p->data.userName);break;
						case 8:printf("\n\t\t\t请输入正确的密码：");scanf("%s",p->data.keyWord);break;
						case 9:printf("\n\t\t\t请输入正确的营业额：");scanf("%s",p->data.profit);break;
					} 
					printf("\t\t\t----------------- 修 改 成 功 ！------------------\n");
				}
			}
			getch();
		}
		else
			break;			
	}while(1);
	return Staff_Head;
}

struct staff_node *Staff_Management_Delete()
{
	int i,j,select,profit;
	char sel[5],ch,s[10];
	struct staff_node *p,*q;
	char *Menu[]={"1.姓名","2.性别","3.年龄","4.编号","5.在职状态","6.电话","7.用户名","8.营业额","0.返回"};//职工忘记密码可以通过找系统管理员修改密码
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t\t\t-------------------------------------------------------\n");
			printf("\t\t\t                      人 员 删 除                      \n");
			printf("\t\t\t-------------------------------------------------------\n");
			for(i=0;i<9;i++)
			{
				if(i%2!=0)
					printf("\t\t%-20s\n\n",Menu[i]);
				else
					printf("\n\t\t\t%-20s",Menu[i]);
			}
			printf("\n\t\t\t\t请输入您的选择(0-8)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>8);
		if(select>0)
		{
			p=Staff_Head;
			j=0;
			if(select==1)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员姓名:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.name,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==2)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员性别(F/M):");
				while(strcmp(s,"F")!=0&&strcmp(s,"M")!=0)
					scanf("%s",s);
				if(strcmp(s,"F")==0)
					strcpy(s,"女");
				else
					strcpy(s,"男");
				while(p)
				{
					if(!strcmp(p->data.sex,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==3)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员年龄:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.age,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==4)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员编号:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.id,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==5)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员在职状态(0表示离职，1表示在职):");
				while(strcmp(s,"0")!=0&&strcmp(s,"1")!=0)
					scanf("%s",s);
				if(strcmp(s,"0")==0)
					strcpy(s,"离职");
				else
					strcpy(s,"在职");
				while(p)
				{
					if(!strcmp(p->data.isWork,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==6)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员电话:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.tel,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==7)
			{
				printf("\n\t\t\t请输入您所想要查询的用户名:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.userName,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==8)
			{
				printf("\n\t\t\t请输入您所想要查询的营业额:");
				scanf("%d",&profit);
				while(p)
				{
					if(p->data.profit==profit)
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(Staff_Head==NULL)
				printf("\n\n\n\n\n\n\n\n\t|***********************  暂无记录!  *************************|\n");
			if(j==0)
				switch(select)
				{
				case 1:printf("\n\t\t\t|********* 系统未发现姓名为%-10s的联系人! *********|\n",s);break;
				case 2:printf("\n\t\t\t|********* 系统未发现性别为%-10s的联系人! *********|\n",s);break;
				case 3:printf("\n\t\t\t|********* 系统未发现年龄为%-10s的联系人! *********|\n",s);break;
				case 4:printf("\n\t\t\t|********* 系统未发现编号为%-10s的联系人! *********|\n",s);break;
				case 5:printf("\n\t\t\t|******* 系统未发现在职状态为%-10s的联系人! *******|\n",s);break;
				case 6:printf("\n\t\t\t|********* 系统未发现电话为%-10s的联系人! *********|\n",s);break;
				case 7:printf("\n\t\t\t|******** 系统未发现用户名为%-10s的联系人! ********|\n",s);break;
				case 8:printf("\n\t\t\t|******** 系统未发现营业额为%-10s的联系人! ********|\n",s);break;
				}
			else
			{
				printf("\n\t\t\t请输入您想要删除的服务员编号：");
				scanf("%s",s);
				p=q=Staff_Head;
				while(p&&strcmp(p->data.id,s))
				{
					q=p;
					p=p->next;
				}
				if(p==NULL)
				{
					if(p==Staff_Head)
						printf("\t\t\t--------------- 暂 无 记 录 ！---------------");
					else
						printf("\t\t\t--------------- 查 无 此 人 ！---------------");
				}	
				else
				{
					printf(" -------------------------------------------------------------------------------------------------------\n");
					printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");			
					printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					printf(" -------------------------------------------------------------------------------------------------------\n");
					printf("\t\t\t----------按 回车键(ESC键) 确认(取消)删除！----------\n");
					while(ch!=ENTER&&ch!=ESC)
						ch=getch(); 
					if(ch==ESC)
						break;
					if(p==Staff_Head)
						Staff_Head=p->next;
					else
						q->next=p->next;
					free(p);
					printf("\t\t\t----------------- 删 除 成 功 ！------------------\n");
				}
			}
			getch();
		}
		else
			break;			
	}while(1);
	return Staff_Head;
}

void Staff_Management_Search()
{
	int i,j,select,profit;
	char sel[5],ch,s[10];
	struct staff_node *p;
	char *Menu[]={"1.姓名","2.性别","3.年龄","4.编号","5.在职状态","6.电话","7.用户名","8.营业额","0.返回"};//职工忘记密码可以通过找系统管理员修改密码
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t\t\t-------------------------------------------------------\n");
			printf("\t\t\t                      人 员 查 询                      \n");
			printf("\t\t\t-------------------------------------------------------\n");
			for(i=0;i<9;i++)
			{
				if(i%2!=0)
					printf("\t\t\t%-20s\n\n",Menu[i]);
				else
					printf("\n\t\t\t%-20s",Menu[i]);
			}
			printf("\n\t\t\t\t请输入您的选择(0-8)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>8);
		if(select>0)
		{
			p=Staff_Head;
			j=0;
			if(select==1)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员姓名:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.name,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==2)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员性别(F/M):");
				while(strcmp(s,"F")!=0&&strcmp(s,"M")!=0)
					scanf("%s",s);
				if(strcmp(s,"F")==0)
					strcpy(s,"女");
				else
					strcpy(s,"男");
				while(p)
				{
					if(!strcmp(p->data.sex,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==3)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员年龄:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.age,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==4)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员编号:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.id,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==5)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员在职状态(0表示离职，1表示在职):");
				while(strcmp(s,"0")!=0&&strcmp(s,"1")!=0)
					scanf("%s",s);
				if(strcmp(s,"0")==0)
					strcpy(s,"离职");
				else
					strcpy(s,"在职");
				while(p)
				{
					if(!strcmp(p->data.isWork,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==6)
			{
				printf("\n\t\t\t请输入您所想要查询的服务员电话:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.tel,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==7)
			{
				printf("\n\t\t\t请输入您所想要查询的用户名:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.userName,s))
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(select==8)
			{
				printf("\n\t\t\t请输入您所想要查询的营业额:");
				scanf("%d",&profit);
				while(p)
				{
					if(p->data.profit==profit)
					{
						j++;
						if(j==1)
						{
							printf(" -------------------------------------------------------------------------------------------------------\n");
							printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10s%-10s%-16s\n","姓名","性别","年龄","编号","在职情况","电话","销售额","用户名","密码");
						}			
						printf("%-10s%-10s%-10s%-10s%-10s%-15s%-10d%-10s%-16s\n",p->data.name,p->data.age,p->data.sex,p->data.id,p->data.isWork,p->data.tel,p->data.profit,p->data.userName,p->data.keyWord);
					}
					p=p->next;
				}
				if(j>0)
					printf(" -------------------------------------------------------------------------------------------------------\n");
			}
			if(Staff_Head==NULL)
				printf("\n\n\n\n\n\n\n\n\t|***********************  暂无记录!  *************************|\n");
			if(j==0)
				switch(select)
				{
				case 1:printf("\n\t\t\t|********* 系统未发现姓名为%-10s的联系人! *********|\n",s);break;
				case 2:printf("\n\t\t\t|********* 系统未发现性别为%-10s的联系人! *********|\n",s);break;
				case 3:printf("\n\t\t\t|********* 系统未发现年龄为%-10s的联系人! *********|\n",s);break;
				case 4:printf("\n\t\t\t|********* 系统未发现编号为%-10s的联系人! *********|\n",s);break;
				case 5:printf("\n\t\t\t|******* 系统未发现在职状态为%-10s的联系人! *******|\n",s);break;
				case 6:printf("\n\t\t\t|********* 系统未发现电话为%-10s的联系人! *********|\n",s);break;
				case 7:printf("\n\t\t\t|******** 系统未发现用户名为%-10s的联系人! ********|\n",s);break;
				case 8:printf("\n\t\t\t|******** 系统未发现营业额为%-10s的联系人! ********|\n",s);break;
				}
			printf("\n\t\t\t---------------按 回车键 继续查询！---------------");
			ch=getch();
		}
		else
			break;
	}while(ch==ENTER);
}

int IsUsernameRepeat(char *s)
{
	struct boss_node *B;
	struct staff_node *S;
	struct admin_node *A;
	int Find=0;
	if(Find==0)
	{
		B=Boss_Head;
		while(B)
		{
			if(strcmp(B->data.userName,s)==0)
				Find=1;
			B=B->next;
		} 
	}
	if(Find==0)
	{
		A=Admin_Head;
		while(A)
		{
			if(strcmp(A->data.userName,s)==0)
				Find=1;
			A=A->next;
		}
	}
	if(Find==0)
	{
		S=Staff_Head;
		while(S)
		{
			if(strcmp(S->data.userName,s)==0)
				Find=1;
			S=S->next;
		}
	}
	if(Find==1)
		printf("用户名已存在！请重新输入！\n");
	return Find;
}

void Table_Management()
{
	int i,select;
	char sel[5]; 
	char *Menu[]={"1.添加台桌","2.显示台桌","3.修改台桌","4.删除台桌","5.查询台桌","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t-------------------------------------------------------\n");
			printf("\t                      人 员 管 理                      \n");
			printf("\t-------------------------------------------------------\n");
			for(i=0;i<6;i++)
				printf("\n\t\t\t%-20s\n\n",Menu[i]);
			printf("\t\t\t请输入您的选择(0-4)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>5);
		switch(select)
		{
		case 1:Table_Head=Table_Management_Input();break;
		case 2:Table_Management_Display();break;
		case 3:Table_Head=Table_Management_Modify();break;
		case 4:Table_Head=Table_Management_Delete();break;
		case 5:Table_Management_Search();break;
		}
		if(select==0)
			break;
	}while(1);
}
struct table_node *Table_Management_Input()
{
	struct table_node *p,*q;
	char ch,s[20];
	printf("\n\t-------------------------------------------------------\n");
	printf("\t                      添 加 台 桌                      \n");
	printf("\t-------------------------------------------------------\n");
	do
	{
		strcpy(s,"0");//因为 s 循环使用，若不重新赋值为0，会影响下一个添加的台桌 
		p=Table_Head;
		while(p)
		{
			q=p;
			p=p->next;
		}
		p=(struct table_node *)malloc(sizeof(struct table_node));
		printf("请输入新台桌的编号：");
		scanf("%s",p->data.id);
		printf("请输入新台桌的使用状况(1占用 2空闲 3维护 4预定）：");
		while(strcmp(s,"1")!=0&&strcmp(s,"2")!=0&&strcmp(s,"3")!=0&&strcmp(s,"4")!=0) 
			scanf("%s",s);
		if(strcmp(s,"1")==0)
			strcpy(p->data.condition,"占用");
			else if(strcmp(s,"2")==0)
					strcpy(p->data.condition,"空闲");
				else if(strcmp(s,"3")==0)
						strcpy(p->data.condition,"维护");
					else
						strcpy(p->data.condition,"预定");						
		printf("请输入新台桌的位置描述：");
		scanf("%s",p->data.location);
		p->next=NULL;
		if(Table_Head==NULL)
			Table_Head=p;
		else
			q->next=p;
		q=p; 
		printf("\n\t|********* 添加成功! 按回车键继续添加 or 按N键停止添加*********|\n");
		ch=getch();			//***********************************************读取按键直到为ENTER或N
		if(ch==N||ch==n)
			break;
	}while(ch==ENTER);
	return Table_Head;
}
void Table_Management_Display()
{
	struct table_node *p;
	p=Table_Head;
	system("cls");
	printf("\n\t-------------------------------------------------------\n");
	printf("\t                      台 桌 名 单                      \n");
	printf("\t-------------------------------------------------------\n");
	printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
	while(p)
	{
		printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);
		p=p->next;
	}
	getch();
}
struct table_node *Table_Management_Modify()
{
	int i,j,select;
	char sel[5],ch,s[10];
	struct table_node *p;
	char *Menu[]={"1.编号","2.使用情况","3.位置描述","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t-------------------------------------------------------\n");
			printf("\t                      台 桌 修 改                      \n");
			printf("\t-------------------------------------------------------\n");
			for(i=0;i<4;i++)
				printf("\n\t\t\t%-20s\n\n",Menu[i]);
			printf("\n\t\t\t请输入您的选择(0-3)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>3);
		if(select>0)
		{
			strcpy(s,"0");
			p=Table_Head;
			j=0;
			if(select==1)
			{
				printf("\n\t\t请输入您所想要修改的台桌编号:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.id,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
							printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==2)
			{
				printf("\n\t\t请输入您所想要查询的台桌使用情况（1占用 2空闲 3维护 4预定）:");
				while(strcmp(s,"1")!=0&&strcmp(s,"2")!=0&&strcmp(s,"3")!=0&&strcmp(s,"4")!=0) 
					scanf("%s",s);
				if(strcmp(s,"1")==0)
					strcpy(s,"占用");
					else if(strcmp(s,"2")==0)
						strcpy(s,"空闲");
						else if(strcmp(s,"3")==0)
							strcpy(s,"维护");
							else
								strcpy(s,"预定");
				while(p)
				{
					if(!strcmp(p->data.condition,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
							printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==3)
			{
				printf("\n\t\t请输入您所想要查询的台桌位置:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.location,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
							printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(p==Table_Head)
				printf("\n\n\n\n\n\n\n\n\t|***********************  暂无记录!  *************************|\n");
			if(j==0)
				switch(select)
				{
				case 1:printf("\n\t|********* 系统未发现编号为%-20s的台桌! *********|\n",s);break;
				case 2:printf("\n\t|****** 系统未发现使用情况为%-20s的台桌! ********|\n",s);break;
				case 3:printf("\n\t|********* 系统未发现位置在%-20s的台桌! *********|\n",s);break;
				}
			else
			{
				printf("请输入您想要修改的台桌编号：");
				scanf("%s",s);
				p=Table_Head;
				while(p&&strcmp(p->data.id,s))
					p=p->next; 
				if(p==NULL)
				{
					if(p==Table_Head)
						printf("\t--------------- 暂 无 记 录 ！---------------");
					else
						printf("\t--------------- 查 无 此 桌 ！---------------");
				}	
				else
				{
					system("cls");
					printf("待修改台桌信息：\n");
					printf("\t-------------------------------------------------------\n");
					printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
					printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);
					printf("\t-------------------------------------------------------\n");
					do
					{
						for(i=0;i<4;i++)
							printf("\n\t\t\t%-20s\n\n",Menu[i]);
						printf("\n\t\t请输入您想要修改的内容(0-3)：");
						scanf("%s",sel);
						select=atoi(sel);
					}while(select<0||select>3);
					if(select==0)
						break;
					switch(select)
					{
						case 1:printf("\n\t\t\t请输入正确的编号：");scanf("%s",p->data.id);break;
						case 2:printf("\n\t请输入正确的使用情况(1占用 2空闲 3维护 4预定）：");
								strcpy(s,"0");
								while(strcmp(s,"1")!=0&&strcmp(s,"2")!=0&&strcmp(s,"3")!=0&&strcmp(s,"4")!=0) 
									scanf("%s",s);
								if(strcmp(s,"1")==0)
									strcpy(p->data.condition,"占用");
								else if(strcmp(s,"2")==0)
							 		strcpy(p->data.condition,"空闲");
									else if(strcmp(s,"3")==0)
										strcpy(p->data.condition,"维护");
										else
											strcpy(p->data.condition,"预定");break;
						case 3:printf("\n\t\t\t请输入正确的位置描述：");scanf("%s",p->data.location);break;
					} 
					printf("\t----------------- 修 改 成 功 ！------------------\n");
				}
			}
			getch();
		}
		else
			break;	
	}while(1);
	return Table_Head;
}

struct table_node *Table_Management_Delete()
{
	int i,j,select;
	char sel[5],ch,s[10];
	struct table_node *p,*q;
	char *Menu[]={"1.编号","2.使用情况","3.位置描述","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t-------------------------------------------------------\n");
			printf("\t                      台 桌 删 除                      \n");
			printf("\t-------------------------------------------------------\n");
			for(i=0;i<4;i++)
				printf("\n\t\t\t%-20s\n\n",Menu[i]);
			printf("\n\t\t\t请输入您的选择(0-3)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>3);
		if(select>0)
		{
			p=Table_Head;
			j=0;
			if(select==1)
			{
				printf("\n\t\t请输入您所想要修改的台桌编号:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.id,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
							printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==2)
			{
				printf("\n\t\t请输入您所想要查询的台桌使用情况(1占用 2空闲 3维护 4预定）:");
				while(strcmp(s,"1")!=0&&strcmp(s,"2")!=0&&strcmp(s,"3")!=0&&strcmp(s,"4")!=0) 
					scanf("%s",s);
				if(strcmp(s,"1")==0)
					strcpy(s,"占用");
					else if(strcmp(s,"2")==0)
						strcpy(s,"空闲");
						else if(strcmp(s,"3")==0)
							strcpy(s,"维护");
							else
								strcpy(s,"预定");
				while(p)
				{
					if(!strcmp(p->data.condition,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
							printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==3)
			{
				printf("\n\t\t请输入您所想要查询的台桌位置:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.location,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
							printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(p==Table_Head)
				printf("\n\n\n\n\n\n\n\n\t|***********************  暂无记录!  *************************|\n");
			if(j==0)
				switch(select)
				{
				case 1:printf("\n\t|********* 系统未发现编号为%-20s的台桌! *********|\n",s);break;
				case 2:printf("\n\t|****** 系统未发现使用情况为%-20s的台桌! ********|\n",s);break;
				case 3:printf("\n\t|********* 系统未发现位置在%-20s的台桌! *********|\n",s);break;
				}
			else
			{
				printf("请输入您想要删除的台桌编号：");
				scanf("%s",s);
				p=q=Table_Head;
				while(p&&strcmp(p->data.id,s))
				{
					q=p;
					p=p->next;
				}
				if(p==NULL)
				{
					if(p==Table_Head)
						printf("\t--------------- 暂 无 记 录 ！---------------");
					else
						printf("\t--------------- 查 无 此 桌 ！---------------");
				}	
				else
				{
					system("cls");
					printf("待删除的台桌信息：\n");
					printf("\t-------------------------------------------------------\n");
					printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
					printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);
					printf("\t-------------------------------------------------------\n");
					printf("\t\t\t----------按 回车键(ESC键) 确认(取消)删除！----------\n");
					while(ch!=ENTER&&ch!=ESC)
						ch=getch(); 
					if(ch==ESC)
						break;
					if(p==Table_Head)
						Table_Head=p->next;
					else
						q->next=p->next;
					free(p);
					printf("\t----------------- 删 除 成 功 ！------------------\n");
				}
			}
			getch();
		}
		else
			break;	
	}while(1);
	return Table_Head;
}
void Table_Management_Search()
{
	int i,j,select;
	char sel[5],ch,s[10];
	struct table_node *p;
	char *Menu[]={"1.编号","2.使用情况","3.位置描述","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t-------------------------------------------------------\n");
			printf("\t                      台 桌 查 询                      \n");
			printf("\t-------------------------------------------------------\n");
			for(i=0;i<4;i++)
				printf("\n\t\t\t%-20s\n\n",Menu[i]);
			printf("\n\t\t\t请输入您的选择(0-3)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>3);
		if(select>0)
		{
			p=Table_Head;
			j=0;
			if(select==1)
			{
				printf("\n\t\t请输入您所想要查询的台桌编号:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.id,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");		
						}
						printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==2)
			{
				printf("\n\t\t请输入您所想要查询的台桌使用情况(1占用 2空闲 3维护 4预定）:");
				while(strcmp(s,"1")!=0&&strcmp(s,"2")!=0&&strcmp(s,"3")!=0&&strcmp(s,"4")!=0) 
					scanf("%s",s);
				while(strcmp(s,"1")!=0&&strcmp(s,"2")!=0&&strcmp(s,"3")!=0&&strcmp(s,"4")!=0) 
					scanf("%s",s);
				if(strcmp(s,"1")==0)
					strcpy(s,"占用");
					else if(strcmp(s,"2")==0)
						strcpy(s,"空闲");
						else if(strcmp(s,"3")==0)
							strcpy(s,"维护");
							else
								strcpy(s,"预定");
				while(p)
				{
					if(!strcmp(p->data.condition,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");		
						}
						printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==3)
			{
				printf("\n\t\t请输入您所想要查询的台桌位置:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.location,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");		
						}
						printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(p==Table_Head)
				printf("\n\n\n\n\n\n\n\n\t|***********************  暂无记录!  *************************|\n");
			if(j==0)
				switch(select)
				{
				case 1:printf("\n\t|********* 系统未发现编号为%-20s的台桌! *********|\n",s);break;
				case 2:printf("\n\t|****** 系统未发现使用情况为%-20s的台桌! ********|\n",s);break;
				case 3:printf("\n\t|********* 系统未发现位置在%-20s的台桌! *********|\n",s);break;
				}
			else
			{
				printf("请输入您想要查询的台桌编号：");
				scanf("%s",s);
				p=Table_Head;
				while(p&&strcmp(p->data.id,s))
					p=p->next;
				if(p==NULL)
				{
					if(p==Table_Head)
						printf("\t--------------- 暂 无 记 录 ！---------------");
					else
						printf("\t--------------- 查 无 此 桌 ！---------------");
				}	
				else
				{
					printf("\t-------------------------------------------------------\n");
					printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
					printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);
					printf("\t-------------------------------------------------------\n");
					
				}
			}
			getch();
		}
		else
			break;	
	}while(1);
}
void List_Mangement()
{
	int i,select;
	char sel[5]; 
	char *Menu[]={"1.添加菜谱","2.显示菜谱","3.修改菜谱","4.删除菜谱","5.查询菜谱","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t-------------------------------------------------------\n");
			printf("\t                      菜 谱 管 理                      \n");
			printf("\t-------------------------------------------------------\n");
			for(i=0;i<6;i++)
				printf("\n\t\t\t%-20s\n\n",Menu[i]);
			printf("\t\t\t请输入您的选择(0-4)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>5);
		switch(select)
		{
		case 1:List_Head=List_Management_Input();break;
		case 2:List_Management_Display();break;
		case 3:List_Head=List_Management_Modify();break;
		case 4:List_Head=List_Management_Delete();break;
		case 5:List_Management_Search();break; 
		}
		if(select==0)
			break;
	}while(1);
}
struct list_node *List_Management_Input()
{
	struct list_node *p,*q;
	char ch,s[20];
	printf("\n\t-------------------------------------------------------\n");
	printf("\t                      添 加 菜 谱                      \n");
	printf("\t-------------------------------------------------------\n");
	do
	{
		strcpy(s,"0");//因为 s 循环使用，若不重新赋值为0，会影响下一个添加的菜谱 
		p=List_Head;
		while(p)
		{
			q=p;
			p=p->next;
		}
		p=(struct list_node *)malloc(sizeof(struct list_node));
		printf("请输入新菜谱的编号：");
		scanf("%s",p->data.id);
		printf("请输入新菜谱的菜名：");
		scanf("%s",p->data.name);						
		strcpy(p->data.price,"0");
		strcpy(p->data.count,"0");
		p->next=NULL;
		if(List_Head==NULL)
			List_Head=p;
		else
			q->next=p;
		q=p; 
		printf("\n\t|********* 添加成功! 按回车键继续添加 or 按N键停止添加*********|\n");
		ch=getch();			//***********************************************读取按键直到为ENTER或N
		if(ch==N||ch==n)
			break;
	}while(ch==ENTER);
	return List_Head;

}
void List_Management_Display()
{
	struct list_node *p;
	p=List_Head;
	system("cls");
	printf("\n\t-------------------------------------------------------\n");
	printf("\t                      台 桌 名 单                      \n");
	printf("\t-------------------------------------------------------\n");
	printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
	while(p)
	{
		printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);
		p=p->next;
	}
	getch();
}
struct list_node *List_Management_Modify()
{
	int i,j,select;
	char sel[5],ch,s[10];
	struct list_node *p;
	char *Menu[]={"1.编号","2.菜名","3.单价","4.份数","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t-------------------------------------------------------\n");
			printf("\t                      菜 谱 修 改                      \n");
			printf("\t-------------------------------------------------------\n");
			for(i=0;i<5;i++)
				printf("\n\t\t\t%-20s\n\n",Menu[i]);
			printf("\n\t\t\t请输入您的选择(0-4)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>4);
		if(select>0)
		{
			p=List_Head;
			j=0;
			if(select==1)
			{
				printf("\n\t\t请输入您所想要修改的菜谱编号:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.id,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
							printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==2)
			{
				printf("\n\t\t请输入您所想要查询的菜名:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.name,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
							printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==3)
			{
				printf("\n\t\t请输入您所想要查询的单价:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.price,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
							printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==4)
			{
				printf("\n\t\t请输入您所想要查询的份数:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.count,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
							printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(p==List_Head)
				printf("\n\n\n\n\n\n\n\n\t|***********************  暂无记录!  *************************|\n");
			if(j==0)
				switch(select)
				{
				case 1:printf("\n\t|********* 系统未发现编号为%-20s的菜谱! *********|\n",s);break;
				case 2:printf("\n\t|********* 系统未发现菜名为%-20s的菜谱! *********|\n",s);break;
				case 3:printf("\n\t|********* 系统未发现单价为%-20s的菜谱! *********|\n",s);break;
				case 4:printf("\n\t|********* 系统未发现份数为%-20s的菜谱! *********|\n",s);break;
				}
			else
			{
				printf("请输入您想要修改的菜谱编号：");
				scanf("%s",s);
				p=List_Head;
				while(p&&strcmp(p->data.id,s))
					p=p->next; 
				if(p==NULL)
				{
					if(p==List_Head)
						printf("\t--------------- 暂 无 记 录 ！---------------");
					else
						printf("\t--------------- 查 无 此 桌 ！---------------");
				}	
				else
				{
					system("cls");
					printf("待修改菜谱信息：\n");
					printf("\t-------------------------------------------------------\n");
					printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
					printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);
					printf("\t-------------------------------------------------------\n");
					do
					{
						for(i=0;i<5;i++)
							printf("\n\t\t\t%-20s\n\n",Menu[i]);
						printf("\n\t\t请输入您想要修改的内容(0-4)：");
						scanf("%s",sel);
						select=atoi(sel);
					}while(select<0||select>4);
					if(select==0)
						break;
					switch(select)
					{
						case 1:printf("\n\t\t\t请输入正确的编号：");scanf("%s",p->data.id);break;
						case 2:printf("\n\t\t\t请输入正确的菜名：");scanf("%s",p->data.name);break;
						case 3:printf("\n\t\t\t请输入正确的单价：");scanf("%s",p->data.price);break;
						case 4:printf("\n\t\t\t请输入正确的份数：");scanf("%s",p->data.count);break;
					} 
					printf("\t----------------- 修 改 成 功 ！------------------\n");
				}
			}
			getch();
		}
		else
			break;	
	}while(1);
	return  List_Head;
}
struct list_node *List_Management_Delete()
{
	int i,j,select;
	char sel[5],ch,s[10];
	struct list_node *p,*q;
	char *Menu[]={"1.编号","2.菜名","3.单价","4.份数","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t-------------------------------------------------------\n");
			printf("\t                      菜 谱 修 改                      \n");
			printf("\t-------------------------------------------------------\n");
			for(i=0;i<5;i++)
				printf("\n\t\t\t%-20s\n\n",Menu[i]);
			printf("\n\t\t\t请输入您的选择(0-4)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>4);
		if(select>0)
		{
			p=List_Head;
			j=0;
			if(select==1)
			{
				printf("\n\t\t请输入您所想要修改的菜谱编号:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.id,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
							printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==2)
			{
				printf("\n\t\t请输入您所想要查询的菜名:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.name,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
							printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==3)
			{
				printf("\n\t\t请输入您所想要查询的单价:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.price,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
							printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==4)
			{
				printf("\n\t\t请输入您所想要查询的份数:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.count,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
							printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);		
						}
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(p==List_Head)
				printf("\n\n\n\n\n\n\n\n\t|***********************  暂无记录!  *************************|\n");
			if(j==0)
				switch(select)
				{
				case 1:printf("\n\t|********* 系统未发现编号为%-20s的菜谱! *********|\n",s);break;
				case 2:printf("\n\t|********* 系统未发现菜名为%-20s的菜谱! *********|\n",s);break;
				case 3:printf("\n\t|********* 系统未发现单价为%-20s的菜谱! *********|\n",s);break;
				case 4:printf("\n\t|********* 系统未发现份数为%-20s的菜谱! *********|\n",s);break;
				}
			else
			{
				printf("请输入您想要删除的菜谱编号：");
				scanf("%s",s);
				q=p=List_Head;
				while(p&&strcmp(p->data.id,s))
				{
					q=p;
					p=p->next;
				} 
				if(p==NULL)
				{
					if(p==List_Head)
						printf("\t--------------- 暂 无 记 录 ！---------------");
					else
						printf("\t--------------- 查 无 此 桌 ！---------------");
				}	
				else
				{
					system("cls");
					printf("待删除菜谱信息：\n");
					printf("\t-------------------------------------------------------\n");
					printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
					printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);
					printf("\t-------------------------------------------------------\n");
					printf("\t\t\t----------按 回车键(ESC键) 确认(取消)删除！----------\n");
					while(ch!=ENTER&&ch!=ESC)
						ch=getch(); 
					if(ch==ESC)
						break;
					if(p==List_Head)
						List_Head=p->next;
					else
						q->next=p->next;
					free(p);
					printf("\t----------------- 删 除 成 功 ！------------------\n");
				}
			}
			getch();
		}
		else
			break;	
	}while(1);
	return List_Head;
}
void List_Management_Search()
{
	int i,j,select;
	char sel[5],ch,s[10];
	struct list_node *p;
	char *Menu[]={"1.编号","2.菜名","3.单价","4.份数","0.返回"};
	do
	{
		do
		{
			system("cls"); 
			printf("\n\t-------------------------------------------------------\n");
			printf("\t                      菜 谱 修 改                      \n");
			printf("\t-------------------------------------------------------\n");
			for(i=0;i<5;i++)
				printf("\n\t\t\t%-20s\n\n",Menu[i]);
			printf("\n\t\t\t请输入您的选择(0-4)：");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>4);
		if(select>0)
		{
			p=List_Head;
			j=0;
			if(select==1)
			{
				printf("\n\t\t请输入您所想要修改的菜谱编号:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.id,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
						}
						printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);	
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==2)
			{
				printf("\n\t\t请输入您所想要查询的菜名:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.name,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
						}
						printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);	
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==3)
			{
				printf("\n\t\t请输入您所想要查询的单价:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.price,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
						}
						printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);	
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(select==4)
			{
				printf("\n\t\t请输入您所想要查询的份数:");
				scanf("%s",s);
				while(p)
				{
					if(!strcmp(p->data.count,s))
					{
						j++;
						if(j==1)
						{
							printf("\t-------------------------------------------------------\n");
							printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
						}
						printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);	
					}
					p=p->next;
				}
				if(j>0)
					printf("\t-------------------------------------------------------\n");
			}
			if(p==List_Head)
				printf("\n\n\n\n\n\n\n\n\t|***********************  暂无记录!  *************************|\n");
			if(j==0)
				switch(select)
				{
				case 1:printf("\n\t|********* 系统未发现编号为%-20s的菜谱! *********|\n",s);break;
				case 2:printf("\n\t|********* 系统未发现菜名为%-20s的菜谱! *********|\n",s);break;
				case 3:printf("\n\t|********* 系统未发现单价为%-20s的菜谱! *********|\n",s);break;
				case 4:printf("\n\t|********* 系统未发现份数为%-20s的菜谱! *********|\n",s);break;
				}
			else
			{
				printf("请输入您想要查询的菜谱编号：");
				scanf("%s",s);
				p=List_Head;
				while(p&&strcmp(p->data.id,s))
					p=p->next; 
				if(p==NULL)
				{
					if(p==List_Head)
						printf("\t--------------- 暂 无 记 录 ！---------------");
					else
						printf("\t--------------- 查 无 此 菜 ！---------------");
				}	
				else
				{
					printf("\t-------------------------------------------------------\n");
					printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
					printf("\t%-20s%-20s%-20s%-20s\n",p->data.id,p->data.name,p->data.price,p->data.count);
					printf("\t-------------------------------------------------------\n");
				}
			}
			getch();
		}
		else
			break;	
	}while(1);
}
struct table_node *Record_Management_Open()
{
	char s[5],ch; 
	struct table_node *p;	//台桌 
	int i=0;
	p=Table_Head;
	while(p)
	{
		if(!strcmp(p->data.condition,"空闲"))
		{
			i++;
			if(i==1)
			{
				printf("\t-------------------------------------------------------\n");
				printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");		
			}
			printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);
		}
		p=p->next;
	}
	if(i>0)
	{
		printf("\t-------------------------------------------------------\n");
		printf("\n\t\t请输入您所想要投入使用的台桌:");
		scanf("%s",s);
		p=Table_Head;
		while(p&&strcmp(p->data.id,s))//找到台桌 
			p=p->next;
		if(p==NULL)
		{
			if(p==Table_Head)
				printf("\t--------------- 暂 无 记 录 ！---------------");
			else
				printf("\t--------------- 查 无 此 桌 ！---------------");
		}
		else
		{
			strcpy(p->data.condition,"占用");
			printf("\t------------------- 开 桌 成 功 ！--------------------\n\n");
			printf("\t-------------------------------------------------------\n");
			printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
			printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);
			printf("\t-------------------------------------------------------\n");
			printf("\t---------------按 回车键 返回菜单！---------------\n");
			while((ch=getch())!=ENTER);
		} 
	}		
	else
		printf("抱歉，台桌已满！请稍等片刻！\n");
	return Table_Head; 
}

struct record_node *Record_Management_Order()
{
	char s[10],ch,id;
	struct table_node *p;//打印所有（占用、预约的台桌）
	struct record_node *q1,*q2;	//销售记录 
	struct staff_node *m;	//员工 
	struct list_node *l;	//菜谱 
	p=Table_Head;
	int i=0,num;
	srand(time(NULL));
	q1=q2=Record_Head;
	while(q2)
	{
		q1=q2;
		q2=q2->next;
	} 
	while(p)
	{
		if(!strcmp(p->data.condition,"占用")||!strcmp(p->data.condition,"预定"))
		{
			i++;
			if(i==1)
			{
				printf("\t-------------------------------------------------------\n");
				printf("\t%-20s%-20s%-20s\n","编号","使用情况","位置描述");
			}		
			printf("\t%-20s%-20s%-20s\n",p->data.id,p->data.condition,p->data.location);			
		}
		p=p->next;
	}
	printf("\t-------------------------------------------------------\n");
	printf("\t请选择点菜的台桌编号：");
	scanf("%s",s);
	p=Table_Head;
	while(p&&strcmp(p->data.id,s))
		p=p->next;
	if(p==NULL)
	{
		if(p==Table_Head)
				printf("\t--------------- 暂 无 记 录 ！---------------");
			else
				printf("\t--------------- 查 无 此 桌 ！---------------");			
	}
	else
	{
		m=Staff_Head;
		while(m&&strcmp(m->data.id,Id))//找到现在执行操作的服务员 (一定找得到)
			m=m->next;
		printf("\n\t-------------------------------------------------------\n");
		printf("\t                      菜 谱 名 单                      \n");
		printf("\t-------------------------------------------------------\n");
		printf("\t%-20s%-20s%-20s%-20s\n","菜编号","菜名","价格","份数");
		l=List_Head;
		while(l)
		{
			printf("\t%-20s%-20s%-20s%-20s\n",l->data.id,l->data.name,l->data.price,l->data.count);
			l=l->next;
		}
		printf("\t-------------------------------------------------------\n");
		printf("\t请输入您想要点菜的编号：");
		scanf("%s",s);
		l=List_Head;
		while(l&&strcmp(l->data.id,s))
			l=l->next;
		if(l==NULL)
		{
			if(l==List_Head)
				printf("\t--------------- 暂 无 记 录 ！---------------");
			else
				printf("\t--------------- 查 无 此 菜 ！---------------");			
		}
		else
		{
			q2=(struct record_node *)malloc(sizeof(struct record_node));
			q2->data.tableInfo=p->data;//台桌信息 
			q2->data.staffInfo=m->data;//服务员信息 
			strcpy(q2->data.isAfford,"未支付");
			printf("\t请问您需要几份？：");
		 	scanf("%s",s);
		 	strcpy(l->data.count,s);
		 	q2->data.listInfo=l->data;//菜名 
			for(i=0;i<15;i++)
			{
				if(i<5)
				{
					num=rand()%26;
					id=num+'A';
				}
				else
				{
					num=rand()%10;
					id=num+'0';
				}
				q2->data.id[i]=id;
			}
			q2->data.id[i]='\0';
			q2->next=NULL;
			if(Record_Head==NULL)
				Record_Head=q2;
			else
				q1->next=q2;
			q1=q2; 
			printf("\t------------------- 点 菜 成 功 ！--------------------\n\n");
			printf("%-20s%-10s%-20s%-10s%-20s%-5s\n","流水号","服务员ID","服务员姓名","台桌号","时间","金额");
			printf("%-20s%-10s%-20s%-10s%-20s%-5d\n",q2->data.id,q2->data.staffInfo.id,q2->data.staffInfo.name,q2->data.tableInfo.id,q2->data.time,atoi(q2->data.listInfo.price)*atoi(q2->data.listInfo.count));//流水号，服务员id，服务员姓名 时间 金额 
			printf("\t-------------------按 任意键 继续---------------------\n");
			getch();
		} 
	}
	return Record_Head;
}
void Record_Management_Profit_Search()
{
	struct record_node *p;
	p=Record_Head;
	int i=0,count=0;
	system("cls");
	printf("\n\t-------------------------------------------------------\n");
	printf("\t                      营 业 额 查 询                     \n");
	printf("\t-------------------------------------------------------\n");
	while(p)
	{
		if(strcmp(p->data.isAfford,"已支付")==0)
		{ 
			i++;
			if(i==1)
			{
				printf("\t--------------------------------------------------------------------------\n\n");
				printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5s\n","流水号","服务员ID","服务员姓名","台桌号","时间","买单情况","金额");
			}
			printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5d\n",p->data.id,p->data.staffInfo.id,p->data.staffInfo.name,p->data.tableInfo.id,p->data.time,p->data.isAfford,atoi(p->data.listInfo.price)*atoi(p->data.listInfo.count));//流水号，服务员id，服务员姓名 时间 金额 	
			count+=atoi(p->data.listInfo.price)*atoi(p->data.listInfo.count);
		}
		p=p->next;	
	}
	if(i==0)
		printf("\t------------------- 暂 无 成 交 记 录 ！---------------");
	else
		printf("\t--------------------------------------------------------------------------\n\n");
	printf("\n\n\n\t\t\t\t\t\t\t\t总收入：%5d",count);
	getch(); 
}
void Record_Management_isAfford_Search()
{
	struct record_node *p;
	p=Record_Head;
	int i,select;
	char sel[5];
	char *Menu[]={"1:未支付查询","2:已支付查询","0：返回"};
	do
	{
		do
		{
			system("cls");
			printf("\n\t-------------------------------------------------------\n");
			printf("\t                   支 付 情 况 查 询                   \n");
			printf("\t-------------------------------------------------------\n");
			for(i=0;i<3;i++)
				printf("\n\t\t\t%-20s\n\n",Menu[i]);
			printf("\n\t\t\t请输入你的选择(0-2):");
			scanf("%s",sel);
			select=atoi(sel);
		}while(select<0||select>2);
		if(select==0)
			break;
		switch(select)
		{
			case 1:strcpy(sel,"未支付");break;
			case 2:strcpy(sel,"已支付");break;
		}
		p=Record_Head;
		i=0;
		while(p)
		{ 
			if(strcmp(p->data.isAfford,sel)==0)
			{ 
				i++;
				if(i==1)
				{
					printf("\t--------------------------------------------------------------------------\n\n");
					printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5s\n","流水号","服务员ID","服务员姓名","台桌号","时间","买单情况","金额");
				}
				printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5d\n",p->data.id,p->data.staffInfo.id,p->data.staffInfo.name,p->data.tableInfo.id,p->data.time,p->data.isAfford,atoi(p->data.listInfo.price)*atoi(p->data.listInfo.count));//流水号，服务员id，服务员姓名 时间 金额 
			}
			p=p->next;
		}
		if(i==0)
			printf("\t------------------- 暂 无 成 交 记 录 ！---------------");
		else
			printf("\t--------------------------------------------------------------------------\n\n");
		getch();
	}while(1);
}
struct record_node *Record_Management_Afford()
{
	struct record_node *p;
	char s[10],ch;
	int i=0,count=0;
	printf("请输入您想要支付的台桌号：");
	scanf("%s",s);
	p=Record_Head;
	while(p)
	{ 
		if(strcmp(p->data.tableInfo.id,s)==0&&strcmp(p->data.isAfford,"未支付")==0)
		{ 
			i++;
			if(i==1)
			{
				printf("\t--------------------------------------------------------------------------\n\n");
				printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5s\n","流水号","服务员ID","服务员姓名","台桌号","时间","买单情况","金额");
			}
			printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5d\n",p->data.id,p->data.staffInfo.id,p->data.staffInfo.name,p->data.tableInfo.id,p->data.time,p->data.isAfford,atoi(p->data.listInfo.price)*atoi(p->data.listInfo.count));//流水号，服务员id，服务员姓名 时间 金额 
			count+=atoi(p->data.listInfo.price)*atoi(p->data.listInfo.count);
		}
		p=p->next;
	}
	if(i==0)
	{
		if(Record_Head==NULL)
			printf("\t--------------- 暂 无 记 录 ！---------------\n");
		else
			printf("\t----- 查 无 此 桌	/	此 桌 已 支 付 ！-----\n");
	}	
	else
	{ 
		printf("\t--------------------------------------------------------------------------\n\n");
		printf("\n\t总金额：%5d\n",count);
		printf("\t--------------请 核 实 找 零 后 ，按 回 车 键 确 认 支 付 ！--------------\n");
		while((ch=getch())!=ENTER);
		p=Record_Head;
		while(p)
		{ 
			if(strcmp(p->data.tableInfo.id,s)==0&&strcmp(p->data.isAfford,"未支付")==0)
				strcpy(p->data.isAfford,"已支付");
			p=p->next;
		} 
		printf("\t--------------- 支 付 成 功 ！---------------\n"); 
	}
	getch();
	return Record_Head;
}
void Profit_Count()
{
	struct record_node *p;
	int i=0,count=0;
	p=Record_Head;
	while(p)
	{
		if(strcmp(p->data.isAfford,"已支付")==0)
		{
			i++;
			if(i==1)
			{
				printf("\t--------------------------------------------------------------------------\n\n");
				printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5s\n","流水号","服务员ID","服务员姓名","台桌号","时间","买单情况","金额");
			}
			count+=atoi(p->data.listInfo.price)*atoi(p->data.listInfo.count);
			printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5d\n",p->data.id,p->data.staffInfo.id,p->data.staffInfo.name,p->data.tableInfo.id,p->data.time,p->data.isAfford,atoi(p->data.listInfo.price)*atoi(p->data.listInfo.count));//流水号，服务员id，服务员姓名 时间 金额 
		}
		p=p->next;
	}
	printf("\n\t--------------------------------------------------------------------------\n\n");
	p=Record_Head;
	while(p)
	{
		if(strcmp(p->data.isAfford,"未支付")==0)
		{
			i++;
			if(i==1)
			{
				printf("\t--------------------------------------------------------------------------\n\n");
				printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5s\n","流水号","服务员ID","服务员姓名","台桌号","时间","买单情况","金额");
			}
			printf("%-20s%-10s%-20s%-10s%-20s%-20s%-5d\n",p->data.id,p->data.staffInfo.id,p->data.staffInfo.name,p->data.tableInfo.id,p->data.time,p->data.isAfford,atoi(p->data.listInfo.price)*atoi(p->data.listInfo.count));//流水号，服务员id，服务员姓名 时间 金额 
		}
		p=p->next;
	}
	if(i==0)
		 printf("\t--------------- 暂 无 记 录 ！---------------\n");
 	else
 		printf("\n\n\t\t\t\t\t\t\t\t总收入：%d",count);
	getch();
}

void Waiting(int Identity)
{
	int i;
	system("cls");
	switch(Identity) 
	{
		case 1:printf("\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t欢迎您，尊敬的%s经理先生！",Name);break;
		case 2:printf("\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t欢迎您，尊敬的%s管理员先生！",Name);break;
		case 3:printf("\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t工号%s	登陆成功！",Id);break;
	}	
	for(i=0;i<10;i++)
	{
		printf(".");
		Sleep(200);
	}	
} 
